<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio y NICE</title>
    <style>
        body { font-family: sans-serif; padding: 15px; background: #f4f7f9; }
        .card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); max-width: 450px; margin: auto; margin-bottom: 20px; }
        h2 { color: #005a8c; text-align: center; margin-top: 0; }
        .lab-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; font-size: 0.9em; }
        .lab-row b { color: #1a73e8; }
        
        /* Gr√°fica NICE */
        .chart-box { position: relative; height: 120px; background: linear-gradient(to top, #e8f5e9 0%, #fffde7 50%, #ffebee 100%); border-left: 2px solid #333; border-bottom: 2px solid #333; margin: 20px 0; overflow: hidden; }
        .line-nice { position: absolute; width: 100%; height: 2px; background: #f44336; border-top: 1px dashed white; bottom: 50%; transition: 0.5s; }
        .dot { position: absolute; width: 10px; height: 10px; background: #005a8c; border-radius: 50%; bottom: 0; left: 0; transition: 0.5s; border: 2px solid white; z-index: 10; }
        
        input { width: 100%; padding: 10px; margin: 8px 0; border-radius: 8px; border: 1px solid #ddd; box-sizing: border-box; }
        .result { padding: 15px; border-radius: 10px; text-align: center; font-weight: bold; margin-top: 10px; display: none; }
        .danger { background: #ff5252; color: white; }
        .safe { background: #4caf50; color: white; }
        .btn-back { display: block; text-align: center; margin-top: 20px; color: #666; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <h2>üß™ Ref. Laboratorio</h2>
    <div class="lab-row"><span>pH Arterial</span><b>7.35 - 7.45</b></div>
    <div class="lab-row"><span>pCO2 (mmHg)</span><b>35 - 45</b></div>
    <div class="lab-row"><span>Glucosa (mg/dL)</span><b>45 - 90</b></div>
    <div class="lab-row"><span>Hematocrito (%)</span><b>45 - 60</b></div>
    <div class="lab-row"><span>Bili Cord√≥n (mg/dL)</span><b>< 2.0</b></div>
</div>

<div class="card">
    <h2>üìà Gu√≠a NICE (Ictericia)</h2>
    <p style="font-size: 10px; color: #666; text-align: center;">Umbral para ‚â•38 Semanas</p>
    
    <label style="font-size: 12px; font-weight: bold;">Horas de vida:</label>
    <input type="number" id="h" placeholder="Ej: 36" oninput="runNice()">
    
    <label style="font-size: 12px; font-weight: bold;">Bilirrubina Total (mg/dL):</label>
    <input type="number" id="bt" step="0.1" placeholder="Ej: 14.2" oninput="runNice()">

    <div class="chart-box">
        <div id="ln" class="line-nice"></div>
        <div id="pt" class="dot"></div>
    </div>

    <div id="res" class="result"></div>
    <a href="index.html" class="btn-back">‚Üê Volver al Men√∫</a>
</div>

<script>
function runNice() {
    const h = parseFloat(document.getElementById('h').value) || 0;
    const bt = parseFloat(document.getElementById('bt').value) || 0;
    const pt = document.getElementById('pt');
    const ln = document.getElementById('ln');
    const res = document.getElementById('res');

    // L√≥gica NICE simplificada: Sube de 6mg/dL (0h) a 18mg/dL (72h+)
    let limit = 0;
    if (h <= 24) limit = 6 + (h * 0.25);
    else if (h <= 72) limit = 12 + ((h - 24) * 0.125);
    else limit = 18;

    // Actualizar Gr√°fica
    pt.style.left = Math.min((h / 96) * 100, 95) + "%";
    pt.style.bottom = Math.min((bt / 22) * 100, 95) + "%";
    ln.style.bottom = (limit / 22) * 100 + "%";

    if (h > 0 && bt > 0) {
        res.style.display = "block";
        if (bt >= limit) {
            res.className = "result danger";
            res.innerHTML = `‚ö†Ô∏è FOTOTERAPIA INDICADA<br>Umbral: ${limit.toFixed(1)} mg/dL`;
        } else {
            res.className = "result safe";
            res.innerHTML = `‚úÖ BAJO EL UMBRAL<br>L√≠mite: ${limit.toFixed(1)} mg/dL`;
        }
    }
}
</script>

</body>
</html>
